<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="utf-8" />

		<!-- Always force latest IE rendering engine (even in intranet) & Chrome Frame
		Remove this if you use the .htaccess -->
		<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
		<title>Winestore Database System</title>
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<link rel="stylesheet" type="text/css" href="css/bootstrap.css">
		
	</head>

	<body>
		<div class="container">
			<div class="row">
				<div class="col-lg-6 col-lg-offset-3">
					<h1>Winestore Database System</h1>
					<br />
					<form class="well" action="query.php" method="GET">
						<fieldset>
							<div class="row">
								<div class="col-lg-10">
									<legend>Please enter one or more criterias to search.</legend>
								</div>	
								<div class="col-lg-2">
									<button type="button" id="startSession" class="pull-right btn btn-primary btn-small">Start session</button>
									<button type="button" id="endSession" class="pull-right btn btn-primary btn-small hidden">session</button>
								</div>								
							</div>
							<div class="form-group">
								<label for="wineName">Wine Name</label>
								<input type="text" class="form-control" id="wineName" name="wine" placeholder="Enter wine name">	
							</div>
							<div class="form-group">
								<label for="wineryName">Winery Name</label>
								<input type="text" class="form-control" id="wineryName" name="winery"placeholder="Enter winery name">	
							</div>
							<div class="form-group">
								<label for="wineRegion">Winery Region</label>
								<select class="form-control" id="wineRegion" name="region">
								  <option value="">Select a region</option>
									  <!-- $BeginBlock Region -->									  	
									  	<option value="${region}">${region}</option>
									  <!-- $EndBlock Region -->
								  </select>
							</div> 
							<div class="form-group">
								<label for="grapeVariety">Grape Variety</label>
								<select class="form-control" id="grapeVariety" name="variety">
								  <option value="">Select a grape variety</option>
								  	<!-- $BeginBlock Variety -->									  	
									  	<option value="${variety}">${variety}</option>
									<!-- $EndBlock Variety -->
								</select>
							</div>
							<div class="form-group">
								<label>Year Range</label>
								<div class="row">
									<div class="col-lg-3">
										<select class="form-control" id="yearFrom" name="yearFrom" >
										  <option value="">From</option>
										  	<!-- $BeginBlock yearFrom -->									  	
									  			<option value="${yearFrom}">${yearFrom}</option>
									  		<!-- $EndBlock yearFrom -->
										</select>
									</div>
									<div class="col-lg-3">
										<select class="form-control" id="yearTo" name="yearTo">
										  <option value="">To</option>
										  	<!-- $BeginBlock yearTo -->									  	
									  			<option value="${yearTo}">${yearTo}</option>
									  		<!-- $EndBlock yearTo -->
										</select>
									</div>
								</div>
							</div>
							<div class="form-group">
                            	<label for="minStock">A minimum number of wines in stock, per wine</label>
                            	<div class="row">
 									<div class="col-lg-3">
 										<input type="number" class="form-control" id="minStock" name="minStock" min="0">
 									</div>
                            	</div>
							</div>
							<div class="form-group">
                            	<label for="minOrder">A minimum number of wines ordered, per wine</label>
                            	<div class="row">
 									<div class="col-lg-3">
 										<input type="number" class="form-control" id="minOrder" name="minOrder" min="0">
 									</div>
                            	</div>
							</div>
							<div class="form-group">
								<label>Cost Range (Per Wine)</label>
								<div class="row">
									<div class="col-lg-3">
										<select class="form-control" id="minCost" name="minCost">
										  <option value="">Min</option>
										  <option value="5">5</option>
										  <option value="10">10</option>
										  <option value="15">15</option>
										  <option value="20">20</option>
										  <option value="25">25</option>
										  <option value="30">30</option>
										</select>
									</div>
									<div class="col-lg-3">
										<select class="form-control" id="maxCost" name="maxCost">
										  <option value="">Max</option>
										  <option value="5">5</option>
										  <option value="10">10</option>
										  <option value="15">15</option>
										  <option value="20">20</option>
										  <option value="25">25</option>
										  <option value="30">30</option>
										</select>
									</div>
								</div>
							</div>
							<div class="pull-right">
								<button type="submit" id="search" class="btn btn-success btn-large">Search</button>
							</div>
						</fieldset>
					</form>
				</div>
			</div>
			
			<footer class="col-lg-6 col-lg-offset-3">
				<p>
					&copy; Copyright  by Lixing Zhang, Student ID: s344103
				</p>
			</footer>
		</div>
	</body>
	<script src="http://code.jquery.com/jquery.js"></script>
	<script src="js/bootstrap.min.js"></script>
	<script src="js/myscript.js"></script>
	<script>
	// simple form validation
	$(document).ready(function(){
		$("#search").click(function(){
			var yearFrom = $("#yearFrom").val();
			var yearTo =  $("#yearTo").val();
			var minCost = $("#minCost").val();
			var maxCost = $("#maxCost").val();
			var i = 0;
			$(":input:text, select").each(function() {
			   if($(this).val() == ""){
			   	 i = i + 1;			   
			   	}
			});
			
			if (i == 8) {
			    	alert(" Please enter at least one criteria");
			    	return false;
			 }

			if (yearFrom > yearTo){
				if (yearTo != ""){
					alert("Start year can not be larger than end year");
				return false;
				}
			}
			if (minCost > maxCost){
				if (maxCost != ""){
				alert("Min cost can not be larger than Max cost");
				return false;	
				}
			}

		});
	});
	</script>
</html>
